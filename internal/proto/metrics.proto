syntax = "proto3";

package metrics;

option go_package = "github.com/RoGogDBD/metric-alerter/internal/proto;proto";

message Metric {
  string id = 1;

  // MType задаёт тип метрики.
  enum MType {
    GAUGE = 0;
    COUNTER = 1;
  }

  MType type = 2;
  // delta для счётчиков.
  int64 delta = 3;
  // value для измерителей.
  double value = 4;
}

// UpdateMetricsRequest содержит список метрик для обновления.
message UpdateMetricsRequest {
  repeated Metric metrics = 1;
}

// UpdateMetricsResponse пустой ответ для подтверждения.
message UpdateMetricsResponse {}

// MetricsService определяет сервис для работы с метриками.
service Metrics {
  // UpdateMetrics обновляет метрики на сервере.
  // Этот метод подходит для отправки как единичных метрик, так и батчей.
  rpc UpdateMetrics(UpdateMetricsRequest) returns (UpdateMetricsResponse);
}
